language: android
jdk: [oraclejdk8]
sudo: false
android:
  components: [platform-tools, tools, build-tools-24.0.2, android-24, extra-android-m2repository,
    extra-google-m2repository, extra-android-support, extra-google-google_play_services,
    sys-img-armeabi-v7a-android-24]
  licenses: [android-sdk-preview-license-.+, android-sdk-license-.+, google-gdk-license-.+]
notifications: {email: false}
before_cache: [rm -f $HOME/.gradle/caches/modules-2/modules-2.lock]
cache:
  directories: [$HOME/.m2, $HOME/.gradle/caches/, $HOME/.gradle/wrapper/]
install: [true]
before_script: [chmod +x gradlew, echo no | android create avd --force --name test
    --target android-24 --abi armeabi-v7a, emulator -avd test -no-skin -no-audio -no-window
    -no-boot-anim &, android-wait-for-emulator, adb shell input keyevent 82 &]
script: ['./gradlew core:jacocoTestReport']
after_success: ['bash <(curl -s https://codecov.io/bash)']
branches:
  only: [JoaquimLey/avenging-33-GRADLE_REPORT_GENERATION]
